!function(a){"use strict";a.twistData=function(b){var c=a.Deferred(),d=b.source,e=b.type;a.isArray(d)&&(d=d[0]);var f=function(){try{return a(d)}catch(b){return a()}}(),g=function(b,f){var h={url:b,success:function(b,g,h){if(e&&(f=e),!f){var i=h.getResponseHeader("content-type")||null;f=i&&i.split("/")[1].split(";")[0]}switch(f){case"html":d=a(b);break;default:d=b}c.resolve(d,f)},error:function(a,d){return"parsererror"===d||"jsonp"===f?(c.reject(a,d),void 0):(g(b,"jsonp"),void 0)}};f&&(h.dataType=f),a.ajax(h)};return"string"==typeof d?f.length>0?f.children().length>0?(d=f,e="html",c.resolve(d,e)):""===f.html()?g(f.data("src")):(d=a.parseJSON(f.html()),c.resolve(d,e)):g(d):"function"==typeof d?(d=d(),c.resolve(d,e)):c.resolve(d,e),c.promise()}}(jQuery);!function(a){"use strict";function b(a){try{return a instanceof HTMLElement}catch(b){return"object"==typeof a&&a.nodeType}}a.twistLookup=function(c,d){var e=a(c),f="";if(!e.length)return f;if(e.context||b(e[0])){if("string"==typeof d){var g=d.match(/\[[a-zA-Z0-9\-=]*\]$/);if(g)if(g[0].match(/\=/))f=e.find(d);else{var h=g[0].slice(1,g[0].length-1),i=d.split(g[0])[0];"text"!==h&&"html"!==h?f=""!==i?e.find(i).attr(h):e.attr(h):"text"===h?f=""!==i?e.find(i).text():e.text():"html"===h&&(f=""!==i?e.find(i).html():e.html())}else{var j=e.find(d);j.length>0&&(f=j)}}}else f=c,"string"==typeof d&&a.each(d.split(/\./),function(a,b){f=f&&"string"!=typeof f?b in f?f[b]:"":""});return a.isFunction(d)&&(f=d(c)),"undefined"==typeof f&&(f=""),f}}(jQuery);!function(a){"use strict";a.twist=function(b,c){var d=this;d.$element=a(c).addClass("aol-twist-wrapper"),d.options=a.extend(!0,{},a.twist.settings,b),d.options=a.extend(!0,{},d.options,d.$element.data()),d._init(d)},a.twist.settings={speed:300,contentMap:{entryArray:{path:"slides"},photoSrc:{path:"image_url_large"},caption:{path:"text"},title:{path:"title"},thumbnail:{path:"image_url_thumb"},type:{path:"type"},instagram:{path:"data.instagram_link"},tweetLink:{path:"data.tweet_link"}}},a.twist.prototype={plugins:[],topic:function(b){var c,d=this,e=b&&d.topics[b];return e||(c=a.Callbacks(),e={publish:c.fire,subscribe:c.add,unsubscribe:c.remove},b&&(d.topics[b]=e)),e},initPlugins:function(b){b.loadedPlugins={},b.plugins=a.map(b.plugins,function(a,c){b.loadedPlugins[b.plugins[c].name]=b.plugins[c]._init(b)}),b.index(b.active,!0)},destroy:function(){this.$element.removeData("twist").removeClass().unbind(".twist").undelegate(".twist").empty()},option:function(b){a.isPlainObject(b)&&(this.options=a.extend(!0,this.options,b))},_init:function(a){a.active=a.options.active||0,a.topics={},a.cacheSpeed=a.options.speed,a.topic("data").subscribe(a._build),a.topic("built").subscribe(a.initPlugins),a._data(a)},_data:function(b){var c=this.options.dataType||"jsonp",d=function(d){a.when(a.twistData({source:b.options.data,type:c})).done(function(c,e){b.data=c,"html"===e&&a(b.options.data).hide();var f=a.twistLookup(b.data,b.options.contentMap.entryArray.path);b.entries=a.map(f,function(c,d){var e={index:d,slides:f.length};return a.each(b.options.contentMap,function(b,d){e[b]=a.twistLookup(c,d.path),"entryArray"!==b&&"endCard"!==b&&d.override&&(e[b]=d.override)}),e.type&&""!==e.type||(e.type="image"),e}),b.topic("data").publish(b),d.resolve(b)})};return a.Deferred(d).promise()},_buildSlide:function(b,c){var d=function(c){return c.options=b.options,a("<li/>",{"class":"aol-twist-slide"}).data(c).attr("data-index",c.index)};return"function"==typeof b.options.contentMap.entryArray.html&&(d=b.options.contentMap.entryArray.html),d(c)},addSlides:function(b,c){b.$slides=a(),a.each(c,function(){var a=this,c=b._buildSlide(b,a);b.$slides=b.$slides.add(c)}),b.$slides.css({width:b.$wrapper.width(),height:b.$wrapper.height()}),b.$list.css({width:b.$element.width()*b.$slides.length}),b.$list.append(b.$slides),b.$slides=b.$list.children()},_build:function(b){b.$wrapper=a("<div/>",{"class":"aol-twist-slide-wrapper"}),b.$list=a("<ul/>",{"class":"aol-twist-slides"}),b.$loading=a("<div/>",{"class":"aol-twist-loading-indicator"}),b.$slides=a();var c=b.options.aspectRatio||400/600;b.$wrapper.css({textAlign:"center",height:b.options.wrapperHeight||c*b.$element.width(),width:b.$element.width()}),b.addSlides(b,b.entries),b.$wrapper.append(b.$loading).append(b.$list),b.$element.append(b.$wrapper);var d=function(a){b.topic("built").publish(b),a.resolve(b)};return a.Deferred(d).promise()},_render:{image:function(b){var c=b.data();c.photoSrc.match("{size}")&&(c.photoSrc=c.photoSrc.replace("{size}","l"));var d=function(a){return 100*Math.floor(a/100)},e=d(b.width())>100?d(b.width()):100,f=d(b.height())>100?d(b.height()):100,g="http://o.aolcdn.com/dims-global/dims3/GLOB/resize/"+e+"x"+f+"/"+c.photoSrc;c.options.dims===!1&&(g=c.photoSrc),c.photoSrc.match(".gif")&&(g=c.photoSrc);var h=function(a,b){return function(c){("undefined"==typeof c||null===c)&&(c={type:a}),b.call(this,c)}},i=function(a){function c(){e(),b.css({backgroundImage:"url("+g+")",backgroundPosition:"50% 50%",backgroundRepeat:"no-repeat"}),a.resolve(b)}function d(){e(),a.reject(b)}function e(){f.onload=null,f.onerror=null,f.onabort=null}var f=new Image;f.onload=h("load",c),f.onerror=h("error",d),f.onabort=h("abort",d),f.src=g};return a.Deferred(i).promise()}},next:function(b){var c=this;if(c.busy)return a.Deferred().reject();c.topic("changeStart").publish(c),c.$wrapper.addClass("aol-twist-loading");var d=c.$list.children().first().next();c.active=d.data("index");var e=d.data("type"),f=function(a){c.busy=!0,c._render[e](d).done(function(){c.$wrapper.removeClass("aol-twist-loading"),c.$list.animate({marginLeft:-c.$wrapper.width()},c.options.speed,function(){var d=c.$list.children().first();c.$list.append(d.empty().detach()).css({marginLeft:0}),c.busy=!1,c.topic("next").publish(c),c.topic("change").publish(c,b),a.resolve(c)})})};return a.Deferred(f).promise()},prev:function(b){var c=this;if(c.busy)return a.Deferred().reject();c.topic("changeStart").publish(c),c.$wrapper.addClass("aol-twist-loading");var d=c.$list.children().last();c.active=d.data("index");var e=d.data("type"),f=function(a){c.busy=!0;var f=c.$list.children().last();c.$list.prepend(f.detach()).css({marginLeft:-c.$wrapper.width()}),c._render[e](d).done(function(){c.$wrapper.removeClass("aol-twist-loading"),c.$list.animate({marginLeft:0},c.options.speed,function(){c.busy=!1,c.topic("prev").publish(c),c.topic("change").publish(c,b),f.next().empty(),a.resolve(c)})})};return a.Deferred(f).promise()},index:function(b,c){var d=this;if(d.busy)return a.Deferred().reject();b===d.active&&(d.options.speed=0);var e=d.$list.children('[data-index="'+b+'"]'),f=(e.nextAll(),Array.prototype.reverse.call(e.prevAll()));return d.active<b?(d.$list.children().first().after(e.detach()),d.next(c).done(function(){d.$list.append(f.detach()),d.options.speed=d.cacheSpeed})):(d.$list.append(e.detach()),d.prev(c).done(function(){d.$list.append(f.detach()),d.options.speed=d.cacheSpeed}))},extend:function(a,b){"string"==typeof a&&"function"==typeof b&&(this[a]=function(){b.apply(this,arguments)})}},a.fn.twist=function(b){if("string"==typeof b){var c=Array.prototype.slice.call(arguments,1);this.each(function(){var d=a.data(this,"twist");return d?a.isFunction(d[b])&&"_"!==b.charAt(0)?void d[b].apply(d,c):void a.error('No such method "'+b+'" for twist instance'):void a.error('Cannot call methods on twist prior to initialization; Attempted to call method "'+b+'"')})}else this.each(function(){a.data(this,"twist");a.data(this,"twist",new a.twist(b,this))});return this}}(jQuery);!function(a){"use strict";a.twist.prototype.plugins.push({name:"resize",_init:function(b){return this.resizeWait=0,a(window).on("resize.twist",function(){var a=b.options.aspectRatio||400/600;b.$wrapper.css({height:b.options.wrapperHeight||a*b.$element.width(),width:b.$element.width()}),b.$list.children().css({width:b.$wrapper.width(),height:b.$wrapper.height()}),b.$list.css({width:b.$element.width()*b.entries.length}),b.$list.children().css({background:""}),clearTimeout(this.resizeWait),this.resizeWait=setTimeout(function(){b.options.speed=0,b.index(b.active,!0).done(function(){b.options.speed=b.cacheSpeed}),b.topic("resize").publish(b)},100)}),a.Deferred(function(a){a.resolve(b)}).promise()}})}(jQuery);!function(a){"use strict";a.twist.prototype.plugins.push({name:"arrows",_init:function(b){return this._build(b),this._bind(b),a.Deferred(function(a){a.resolve(b)}).promise()},_build:function(b){b.$arrows=a("<div/>",{"class":"aol-twist-controls",html:'<span class="aol-twist-prev">&lang;</span><span class="aol-twist-next">&rang;</span>'}),b.$wrapper.append(b.$arrows)},_bind:function(b){b.$arrows.on("click.twist",".aol-twist-prev, .aol-twist-next",function(){a(this).is(".aol-twist-prev")?b.prev():b.next()})}})}(jQuery);!function(a){"use strict";a.twist.prototype.plugins.push({name:"thumbs",_init:function(b){var c=this;return b.option({thumbWidth:b.options.thumbWidth||80,thumbHeight:b.options.thumbHeight||80}),b.addThumbs=c.addThumbs,b._buildThumb=c._buildThumb,b.nextThumb=c.nextThumb,b.prevThumb=c.prevThumb,b.topic("thumbBuilt").subscribe(c._bind),b.topic("thumbAdded").subscribe(c._resize),b.topic("change").subscribe(c._update),b.topic("resize").subscribe(c._resize),c._build(b),a.Deferred(function(a){a.resolve(b)}).promise()},addThumbs:function(b,c){b.$thumbs=a(),a.each(c,function(){var a=this,c=b._buildThumb(b,a);b.$thumbs=b.$thumbs.add(c)}),b.$thumbList.append(b.$thumbs),b.$thumbs=b.$thumbList.children(),b.topic("thumbAdded").publish(b,this)},_buildThumb:function(b,c){var d=function(c){c.thumbnail&&c.thumbnail.match("{size}")&&(c.thumbnail=c.thumbnail.replace("{size}","t"));var d="http://o.aolcdn.com/dims-global/dims3/GLOB/thumbnail/"+b.options.thumbWidth+"x"+b.options.thumbHeight+"/quality/85/"+c.thumbnail;return b.options.dims===!1&&(d=c.thumbnail),c.thumbnail.match(".gif")&&(d=c.thumbnail),a("<li/>",{"class":"aol-twist-thumb"}).attr("data-index",c.index).data(c).css({background:"url("+d+") 50% 50% no-repeat",backgroundSize:"auto "+b.options.thumbHeight+"px"})};return"function"==typeof b.options.contentMap.thumbnail.html&&(d=b.options.contentMap.thumbnail.html),d(c)},_build:function(b){b.$thumbsContainer=a("<div/>",{"class":"aol-twist-thumbs-container"}),b.$thumbsWrapper=a("<div/>",{"class":"aol-twist-thumbs-wrapper"}),b.$thumbList=a("<ul/>",{"class":"aol-twist-thumbs"}),b.$thumbArrows=a("<div/>",{"class":"aol-twist-thumb-controls",html:'<span class="aol-twist-prev-thumb">&lsaquo;</span><span class="aol-twist-next-thumb">&rsaquo;</span>'}),b.addThumbs(b,b.entries),b.$thumbsWrapper.append(b.$thumbList),b.$thumbsContainer.append(b.$thumbsWrapper).append(b.$thumbArrows),b.$element.append(b.$thumbsContainer),"carousel"===b.options.thumbStyle&&(b.$thumbList.css({width:b.$thumbs.last().outerWidth(!0)*b.$thumbs.length}),b.$element.addClass("thumb-carousel")),b.$thumbList.width()<b.$thumbsWrapper.outerWidth()?(b.$thumbArrows.hide(),b.$thumbList.css({margin:"0 auto"})):b.$thumbArrows.show(),b.topic("thumbBuilt").publish(b,this)},_bind:function(b){b.$thumbsContainer.on("click.twist",".aol-twist-thumb",function(){b.topic("thumb").publish(b),b.index(a(this).data("index"))}).on("mouseenter.twist",".aol-twist-thumb",function(c){b.topic("thumbEnter").publish(b,c,a(this).data("index"))}).on("mouseleave.twist",".aol-twist-thumb",function(c){b.topic("thumbExit").publish(b,c,a(this).data("index"))}).on("click.twist",".aol-twist-next-thumb, .aol-twist-prev-thumb",function(){a(this).is(".aol-twist-prev-thumb")?b.prevThumb():b.nextThumb()})},_update:function(a){var b=a.$thumbs.removeClass("active").filter('[data-index="'+a.active+'"]').addClass("active");b.position().left+b.outerWidth(!0)>a.$thumbsWrapper.width()&&a.nextThumb(a.active),b.position().left<0&&a.prevThumb(a.active)},_resize:function(a){a.$thumbList.css("carousel"===a.options.thumbStyle||a.$element.is(".fullscreen")?{width:a.$thumbList.children().first().outerWidth(!0)*a.entries.length}:{width:"auto"}),a.$thumbList.width(!0)<a.$thumbsWrapper.outerWidth()?(a.$thumbArrows.hide(),a.$thumbList.css({margin:"0 auto"})):a.$thumbArrows.show()},nextThumb:function(b){var c=this;if(!c.thumbBusy){c.thumbBusy=!0;var d=function(a){var d=c.$thumbsWrapper.width(),e=c.$thumbList.width(),f=-(e-d+parseInt(c.$thumbs.last().css("margin-left"),10)),g=parseInt(c.$thumbList.css("margin-left"),10),h={marginLeft:f};if(g-d>f&&(h={marginLeft:g-d}),"undefined"!=typeof b){var i=c.$thumbs.filter('[data-index="'+b+'"]'),j=-(i.position().left-g);f>j&&(j=f),h={marginLeft:j}}c.$thumbList.animate(h,c.options.speed,function(){c.thumbBusy=!1,a.resolve()})};return a.Deferred(d).promise()}},prevThumb:function(b){var c=this;if(!c.thumbBusy){c.thumbBusy=!0;var d=function(a){var d=c.$thumbsWrapper.outerWidth(!0),e=(c.$thumbList.outerWidth(!0),parseInt(c.$thumbList.css("margin-left"),10)),f={marginLeft:0+parseInt(c.$thumbs.last().css("margin-left"),10)};if(0>e+d&&(f={marginLeft:e+d}),"undefined"!=typeof b){var g=c.$thumbs.filter('[data-index="'+b+'"]'),h=e-g.position().left+(d-g.outerWidth(!0));h>0&&(h=0),f={marginLeft:h}}c.$thumbList.animate(f,c.options.speed,function(){c.thumbBusy=!1,a.resolve()})};return a.Deferred(d).promise()}}})}(jQuery);!function(a){"use strict";a.twist.prototype.plugins.push({name:"infobar",_init:function(b){return this.context=b,b.updateInfo=this.updateInfo,this._build(b),a.Deferred(function(a){a.resolve(b)}).promise()},_build:function(b){b.$infoBar=a("<div/>",{"class":"aol-twist-infobar",html:['<h3 class="aol-twist-slide-title"></h3>','<h4 class="aol-twist-slide-count">','<span class="aol-twist-slide-current"></span>','<span class="aol-twist-slide-count-separator">/</span>','<span class="aol-twist-slide-total"></span>',"</h4>",'<p class="aol-twist-slide-caption"></p>'].join("")}),b.$infoBarCurrent=b.$infoBar.find(".aol-twist-slide-current"),b.$infoBarSeparator=b.$infoBar.find(".aol-twist-slide-count-separator"),b.$infoBarTotal=b.$infoBar.find(".aol-twist-slide-total"),b.$infoBarTitle=b.$infoBar.find(".aol-twist-slide-title"),b.$infoBarCaption=b.$infoBar.find(".aol-twist-slide-caption"),b.$infoBar.css({height:b.options.infobarHeight||"auto"}),b.$wrapper.after(b.$infoBar),b.$element.addClass("infobar"),b.topic("change").subscribe(b.updateInfo)},updateInfo:function(a){var b=a.entries[a.active];a.$infoBarCurrent.html(a.active+1),a.$infoBarTotal.html(a.entries.length),a.$infoBarTitle.html(b.title),a.$infoBarCaption.html(b.caption)}})}(jQuery);!function(a){"use strict";a.twist.prototype.plugins.push({name:"video",_init:function(b){return b._render.video=function(b){var c,d,e=b.data("player"),f=a(e),g=function(a){if(e.match("<script"))c=e.match(/src=["|'].*['|"]/)[0].split(/['|"]/)[1].split(/['|"]/)[0],c=c.replace(/(\?|&|&amp;)width=[0-9]*/gi,"$1width="+b.width()).replace(/(\?|&|&amp;)height=[0-9]*/gi,"$1height="+b.height()),d=document.createElement("script"),d.type="text/javascript",d.src=c,d.onload=function(){a.resolve(b)},b.empty(),b[0].appendChild(d);else{var g=function(){b.html(f.css({width:b.width(),height:b.height()}).attr("width",b.width()).attr("height",b.height()))};if(f.is("iframe")){var h=f.attr("src");f.attr("src","").on("load",function(){a.resolve(b)}),g(),f.attr("src",h)}else g(),a.resolve(b)}};return a.Deferred(g).promise()},a.Deferred(function(a){a.resolve(b)}).promise()}})}(jQuery);!function(a){"use strict";a.twist.prototype.plugins.push({name:"tweet",_init:function(b){return b._render.tweet=function(c){var d=function(d){var e=a('<div class="aol-knot-tweet-wrapper"></div>').css({position:"relative"}),f=c.data("tweetLink");if(f){var g=['<blockquote class="twitter-tweet" ','height="',c.height(),'" ','width="',c.width(),'" ','align="center">','<a href="'+f+'"></a>',"</blockquote>"].join("");e.append(g).css({visibility:"hidden"}),c.html(e),a.when(b._render.image(c)).done(function(){var f=function(){return e.children().first().hasClass("twitter-tweet-rendered")&&e.height()>50?(c.css({backgroundRepeat:"repeat"}),e.css({marginTop:b.options.adjustHeight?25:(c.height()-e.height())/2,marginLeft:"auto",marginRight:"auto",visibility:"visible"}),b.options.adjustHeight&&(c.height()<e.height()+50?(c.css({height:e.height()+50}),b.$element.find(".aol-twist-slide-wrapper").animate({height:e.height()+50})):(c.css({height:b.$element.find(".aol-twist-slide-wrapper").height()}),e.css({marginTop:(c.height()-e.height())/2}))),void d.resolve(b)):void setTimeout(f,50)};a.getScript("//platform.twitter.com/widgets.js",f)})}};return a.Deferred(d).promise()},a.Deferred(function(a){a.resolve(b)}).promise()}})}(jQuery);!function(a){"use strict";a.twist.prototype.plugins.push({name:"text",_init:function(b){return b._render.text=function(c){var d=function(d){var e,f=a('<div class="aol-knot-text-wrapper"></div>'),g=c.data("text");if(g){if(e=function(){var g=a.twistLookup(b.data,".slidetext .fb_iframe_widget");"rendered"===g.attr("fb-xfbml-state")?(f.append(g.html()),c.html(f),d.resolve(b)):setTimeout(e,50)},g.match("fb-root"))return c.data({caption:""}),b.entries[c.data().index].caption="",void e();f.append(g),c.html(f),d.resolve(b)}};return a.Deferred(d).promise()},a.Deferred(function(a){a.resolve(b)}).promise()}})}(jQuery);!function(a){"use strict";a.twist.prototype.plugins.push({name:"instagram",_init:function(b){return b._render.instagram=function(c){var d=function(d){if(c.data().instagram){var e=a("<div/>",{"class":"aol-knot-instagram-wrapper"}),f=a('<iframe src="'+c.data().instagram+'/embed" frameborder="0" scrolling="no" allowtransparency="true"></iframe>');e.append(f),f.attr("width",c.width()),b.options.adjustHeight?(f.attr("height",c.width()+98),b.$element.find(".aol-twist-slide-wrapper").animate({height:c.width()+98})):f.attr("height",c.height()),c.html(e),f.on("load",function(){d.resolve(b)})}};return a.Deferred(d).promise()},a.Deferred(function(a){a.resolve(b)}).promise()}})}(jQuery);!function(a){"use strict";a.twist.prototype.plugins.push({name:"keyboard",_init:function(b){var c=function(c){if(c.which)switch(c.which){case 39:case 32:c.preventDefault(),b.next();break;case 37:c.preventDefault(),b.prev();break;case 27:c.preventDefault(),a.when(b.loadedPlugins.fullscreen).done(function(){b.$element.is(".fullscreen")&&b.exitFullscreen(b)});break;case 70:c.preventDefault(),a.when(b.loadedPlugins.fullscreen).done(function(){b.$element.is(".fullscreen")||b.enterFullscreen(b)})}};return b.$element.on("mouseenter.twist",function(){a(document).on("keydown.twist",c),b.$element.on("mouseleave.twist",function(){a(document).off("keydown.twist",c)})}),a.Deferred(function(a){a.resolve(b)}).promise()}})}(jQuery);!function(a){"use strict";a.twist.prototype.plugins.push({name:"history",_init:function(b){var c=function(){var a=window.location.href.match(/^[^#]+#([^?]*)\??(.*)/);return a?a[1]:""},d=function(a,b){if(!b){var d=a.entries[a.active],e=d.id||"",f=c(),g="";f.match(/slide=[0-9]*/g)&&(f=f.replace(/slide=[0-9]*/g,"")),""!==e&&(g+="slide="+e,""!==f&&(g+="|"+f.replace(/^\|/,"")),0!==g.indexOf("#")&&(g="#"+g),location.replace(location.origin+location.pathname+g+location.search))}},e=function(d){if(!d)return!1;var e=c().match(/slide=[0-9]*/g)?c().match(/slide=[0-9]*/g)[0].split("slide=")[1]:0,f=!1;return e>0?(a.each(b.entries,function(a,b){return b.id===e?(f=b,!1):void 0}),f?f:!1):!1},f=function(a,b){var d=c(),e="#";d.match("fullscreen")&&"enterFullscreen"===b||("enterFullscreen"===b?e+=d+(""===d?"":"|")+"fullscreen":"exitFullscreen"===b&&(e+=d.replace(/\|fullscreen/,"")),console.log(location.origin+location.pathname+e+location.search),location.replace(location.origin+location.pathname+e+location.search))};return b.topic("enterFullscreen").subscribe(f),b.topic("exitFullscreen").subscribe(f),b.topic("change").subscribe(d),a.twist.prototype.index=function(b,c){var d=this;if(d.busy)return a.Deferred().reject();var f=e(c);f&&(b=f.index),b===d.active&&(d.options.speed=0);var g=d.$list.children('[data-index="'+b+'"]'),h=(g.nextAll(),Array.prototype.reverse.call(g.prevAll()));return d.active<b?(d.$list.children().first().after(g.detach()),d.next(c).done(function(){d.$list.append(h.detach()),d.options.speed=d.cacheSpeed})):(d.$list.append(g.detach()),d.prev(c).done(function(){d.$list.append(h.detach()),d.options.speed=d.cacheSpeed}))},a.when(b.loadedPlugins.fullscreen).done(function(){var a=function(){var a=c().match("fullscreen");a&&b.enterFullscreen&&b.enterFullscreen(b)};a()}),a.Deferred(function(a){a.resolve(b)}).promise()}})}(jQuery);!function(a){"use strict";a.twist.prototype.plugins.push({name:"autoplay",_init:function(b){return b.startAuto=function(a){a&&(b.timer=setInterval(function(){b.next()},a))},b.stopAuto=function(){clearInterval(b.timer)},b.options.auto&&b.startAuto(b.options.auto),b.$element.on("mouseenter.twist",function(){b.stopAuto()}).on("mouseleave.twist",function(){b.options.auto&&b.startAuto(b.options.auto)}),a.Deferred(function(a){a.resolve(b)}).promise()}})}(jQuery);!function(a){"use strict";a.twist.prototype.plugins.push({name:"touch",_init:function(b){return this.context=b,this._bind(b),a.Deferred(function(a){a.resolve(b)}).promise()},_bind:function(a){var b,c,d=0,e=0,f=0,g=0,h=0,i=0,j=a.$list,k=a.$slides.first().width();j.on("touchstart",function(k){a.busy||(d=k.originalEvent.changedTouches[0].pageX,e=parseInt(j.css("x"),0),f=k.originalEvent.changedTouches[0].pageX,g=k.originalEvent.changedTouches[0].pageY,h=0,i=0,b=new Date,c=b.getTime(),j.on("touchend",m),j.on("touchmove",l))});var l=function(b){if(!a.busy){var c=b.originalEvent.changedTouches[0].pageX-d;d=b.originalEvent.changedTouches[0].pageX,i=b.originalEvent.changedTouches[0].pageY-g,h=b.originalEvent.changedTouches[0].pageX-f,Math.abs(i)<Math.abs(h+40)&&Math.abs(h)>40&&(b.preventDefault(),j.css({marginLeft:parseInt(j.css("margin-left"),10)+c}))}},m=function(d){if(d.preventDefault(),!a.busy){j.off("touchend",m),j.off("touchmove",l),b=new Date,c=b.getTime()-c;var f=parseInt(j.css("margin-left"),10),g=Math.round(Math.abs(f/k)),h=k/4,i=k*g,n=Math.round(i+h),o=Math.round(i-h),p=Math.abs(Math.abs(e)-Math.abs(f)),q=Math.round(Math.abs(600-600*((k-p)/(600-c))));a.options.speed=Math.max(150,Math.min(q,600)),a.activeSlide===g&&(n<Math.abs(f)&&(g+=1),Math.abs(f)<o&&(g-=1)),f>0&&(g=0),(0>g||g>=a.entries.length)&&(g=0>g?0:a.entries.length-1),a.topic("change").publish(a)}}}})}(jQuery);